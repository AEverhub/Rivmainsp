local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

local silentAimActive = true
local attackCooldown = 0.2 -- 每 0.2 秒攻擊一次（調整攻速）

-- 找最近敵人頭部
local function getNearestHead()
    local closestPlayer = nil
    local shortestDistance = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Team ~= LocalPlayer.Team and player.Character then
            local root = player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                local distance = (root.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end

    if closestPlayer and closestPlayer.Character and closestPlayer.Character:FindFirstChild("Head") then
        return closestPlayer.Character.Head
    end
    return nil
end

-- 自動開火迴圈
task.spawn(function()
    while silentAimActive do
        local head = getNearestHead()
        if head then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, head.Position)
            ReplicatedStorage.Remotes.Attack:FireServer(head)
        end
        task.wait(attackCooldown)
    end
end)

print("自動 Silent Aim 已啟動，攻擊最近敵人頭部")